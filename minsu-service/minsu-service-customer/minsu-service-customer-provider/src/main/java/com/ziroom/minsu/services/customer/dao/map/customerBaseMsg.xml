<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="customer.customerBaseMsgDao" >


    <resultMap id="extMap" extends="BaseResultMap" type="com.ziroom.minsu.services.customer.entity.CustomerExt" >
        <result column="role_name" property="roleName" jdbcType="VARCHAR" />
    </resultMap>

  <resultMap id="BaseResultMap" type="com.ziroom.minsu.entity.customer.CustomerBaseMsgEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 21 20:18:30 CST 2016.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="uid" property="uid" jdbcType="VARCHAR" />
    <result column="real_name" property="realName" jdbcType="VARCHAR" />
    <result column="country_code" property="countryCode" jdbcType="VARCHAR" />
    <result column="customer_mobile" property="customerMobile" jdbcType="VARCHAR" />
    <result column="customer_sex" property="customerSex" jdbcType="TINYINT" />
    <result column="customer_birthday" property="customerBirthday" jdbcType="TIMESTAMP" />
    <result column="customer_email" property="customerEmail" jdbcType="VARCHAR" />
    <result column="id_type" property="idType" jdbcType="TINYINT" />
    <result column="id_no" property="idNo" jdbcType="VARCHAR" />
    <result column="nick_name" property="nickName" jdbcType="VARCHAR" />
    <result column="is_landlord" property="isLandlord" jdbcType="INTEGER" />
    <result column="audit_status" property="auditStatus" jdbcType="TINYINT" />
    <result column="clearing_code" property="clearingCode" jdbcType="VARCHAR" />
    <result column="rent_payment" property="rentPayment" jdbcType="TINYINT" />
    <result column="nation_code" property="nationCode" jdbcType="VARCHAR" />
    <result column="province_code" property="provinceCode" jdbcType="VARCHAR" />
    <result column="city_code" property="cityCode" jdbcType="VARCHAR" />
    <result column="area_code" property="areaCode" jdbcType="VARCHAR" />
    <result column="reside_addr" property="resideAddr" jdbcType="VARCHAR" />
    <result column="customer_edu" property="customerEdu" jdbcType="TINYINT" />
    <result column="customer_job" property="customerJob" jdbcType="VARCHAR" />
    <result column="is_contact_auth" property="isContactAuth" jdbcType="TINYINT" />
    <result column="is_identity_auth" property="isIdentityAuth" jdbcType="TINYINT" />
    <result column="is_upload_icon" property="isUploadIcon" jdbcType="TINYINT" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="last_modify_date" property="lastModifyDate" jdbcType="TIMESTAMP" />
    <result column="is_del" property="isDel" jdbcType="TINYINT" />
    <result column="customer_source" property="customerSource" jdbcType="TINYINT" />
  </resultMap>
  
  <!-- 客户详细信息 -->
  <resultMap type="com.ziroom.minsu.services.customer.entity.CustomerDetailVo" id="CustomerDetailVoMap" extends="BaseResultMap">
  	<association property="customerBaseMsgExtEntity" column="uid" javaType="com.ziroom.minsu.entity.customer.CustomerBaseMsgExtEntity" select="customer.customerBaseMsgExtDao.selectByUid"></association>
  	<collection property="customerPicList" column="uid" javaType="ArrayList" select="customer.customerPicMsgDao.selectCustomerPicByUid"></collection>
  	<collection property="customerOperHistoryList" column="uid" javaType="ArrayList" select="customer.customerOperHistoryDao.selectCustomerHistoryByUid"></collection>
  </resultMap>
  
  <!-- 客户信息详情信息带图片 -->
  <resultMap type="com.ziroom.minsu.services.customer.entity.CustomerDetailImageVo" id="CustomerDetailImageVoMap" extends="BaseResultMap">
  	<collection property="customerPicList" column="uid" javaType="ArrayList" select="customer.customerPicMsgDao.selectCustomerPicByUid"></collection>
  </resultMap>
  
  <sql id="Base_Column_List" >
    <!-- -->
    id, uid, real_name, customer_mobile,country_code, customer_sex, customer_birthday, customer_email, 
    id_type, id_no, nick_name, is_landlord, audit_status, clearing_code, rent_payment, 
    nation_code, province_code, city_code, area_code, reside_addr,customer_edu,customer_job, is_contact_auth, is_identity_auth, 
    is_upload_icon, create_date, last_modify_date, is_del,customer_source
  </sql>


    <sql id="ext_List" >
        <!-- -->
        base.id,
        base.uid,
        base.real_name,
        base.country_code,
        base.customer_mobile,
        base.customer_sex,
        base.customer_birthday,
        base.customer_email,
        base.id_type,
        base.id_no,
        base.nick_name,
        base.is_landlord,
        base.audit_status,
        base.clearing_code,
        base.rent_payment,
        base.nation_code,
        base.province_code,
        base.city_code,
        base.area_code,
        base.reside_addr,
        base.customer_edu,
        base.customer_job,
        base.is_contact_auth,
        base.is_identity_auth,
        base.is_upload_icon,
        base.create_date,
        base.last_modify_date,
        base.is_del,
        base.customer_source
    </sql>
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 21 20:18:30 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where id = #{id,jdbcType=INTEGER}
  </select>
  <!-- 查询用户详细和历史记录 -->
  <select id="getCustomerDeatilVoByUid" resultMap="CustomerDetailVoMap" parameterType="java.lang.String">
  	select 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where uid = #{uid,jdbcType=VARCHAR}
  </select>
  
  <!-- 查询用户基本信息和图片信息-->
  <select id="getCustomerDetailImageByUid" resultMap="CustomerDetailImageVoMap" parameterType="java.lang.String">
  	select 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where uid = #{uid,jdbcType=VARCHAR}
  </select>



    <!-- 查询客户信息 -->
    <select id="getCustomerExtList"  resultMap="extMap" parameterType="com.ziroom.minsu.services.customer.dto.CustomerExtDto" >
        SELECT
        <include refid="ext_List" />

        FROM
        t_customer_base_msg base
        LEFT JOIN t_customer_resource s
        ON s.uid = base.uid
        LEFT JOIN t_customer_role r
        ON r.role_code = s.role_code

        WHERE  base.is_del = 0
        AND  s.role_code = #{roleCode,jdbcType=VARCHAR}

        AND
        (
            r.is_life = 1
            OR
            (
                r.is_life = 0
                <![CDATA[
                     AND r.start_time <=  NOW()
                     AND r.end_time >= NOW()
                 ]]>
            )
        )

        <if test="uid != null and uid != ''" >
            AND base.uid = #{uid,jdbcType=VARCHAR}
        </if>
        <if test="realName != null and realName != ''" >
            AND base.real_name  LIKE concat(#{realName,jdbcType=VARCHAR},'%')
        </if>
        <if test="nickName != null and nickName != ''" >
            AND base.nick_name = #{nickName,jdbcType=VARCHAR}
        </if>
        <if test="customerMobile != null and customerMobile != ''" >
            AND base.customer_mobile  = #{customerMobile,jdbcType=VARCHAR}
        </if>
        <if test="isLandlord != null" >
            AND base.is_landlord = #{isLandlord,jdbcType=INTEGER}
        </if>
        <if test="auditStatus != null">
            AND base.audit_status = #{auditStatus,jdbcType=INTEGER}
        </if>
       <if test="isCanShow != null and isCanShow==1">
            AND EXISTS
        (SELECT DISTINCT uid FROM t_customer_update_field_audit_newlog newLog
        WHERE  field_audit_statu = 0 AND newLog.uid=base.uid)
        </if>
    </select>


    <!-- 查询客户信息 -->
    <select id="getCustomerExtAllList" resultMap="extMap" parameterType="com.ziroom.minsu.services.customer.dto.CustomerExtDto" >
        SELECT
        <include refid="ext_List" />
        from
        t_customer_base_msg base

        WHERE  base.is_del = 0
        <if test="uid != null and uid != ''" >
            AND base.uid = #{uid,jdbcType=VARCHAR}
        </if>
        <if test="realName != null and realName != ''" >
            AND base.real_name  LIKE concat(#{realName,jdbcType=VARCHAR},'%')
        </if>
        <if test="nickName != null and nickName != ''" >
            AND base.nick_name = #{nickName,jdbcType=VARCHAR}
        </if>
        <if test="customerMobile != null and customerMobile != ''" >
            AND base.customer_mobile  = #{customerMobile,jdbcType=VARCHAR}
        </if>
        <if test="isLandlord != null" >
            AND base.is_landlord = #{isLandlord,jdbcType=INTEGER}
        </if>
        <if test="auditStatus != null">
            AND base.audit_status = #{auditStatus,jdbcType=INTEGER}
        </if>
        <if test="isCanShow != null and isCanShow==1">
            AND EXISTS
        (SELECT DISTINCT uid FROM t_customer_update_field_audit_newlog newLog
        WHERE  field_audit_statu = 0 AND newLog.uid=base.uid)
        </if>
    </select>



  <!-- 查询客户信息 -->
  <select id="selectByCondition" resultMap="BaseResultMap" parameterType="com.ziroom.minsu.services.customer.dto.CustomerBaseMsgDto" >
    SELECT 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where  1 = 1
    <if test="uid != null and uid != ''" >
      AND uid = #{uid,jdbcType=VARCHAR}
    </if>
    <if test="realName != null and realName != ''" >
       AND real_name LIKE CONCAT(#{realName,jdbcType=VARCHAR},'%')
    </if>
    <if test="nickName != null and nickName != ''" >
       AND nick_name =#{nickName,jdbcType=VARCHAR}
    </if>
    <if test="customerMobile != null and customerMobile != ''" >
       AND customer_mobile LIKE CONCAT(#{customerMobile,jdbcType=VARCHAR},'%')
    </if>
    <if test="isLandlord != null" >
       AND is_landlord = #{isLandlord,jdbcType=INTEGER}
    </if>
    <if test="auditStatus != null">
       AND audit_status = #{auditStatus,jdbcType=INTEGER}
    </if>
       AND is_del = 0
  </select>
  
  <select id="selectByUid" resultMap="BaseResultMap" parameterType="java.lang.String" >
    SELECT 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where  uid = #{uid,jdbcType=VARCHAR}
  </select>
  
  
  <select id="selectByUidList" resultMap="BaseResultMap" parameterType="map" >
    SELECT 
    <include refid="Base_Column_List" />
    FROM t_customer_base_msg
    WHERE uid in
    <foreach collection="uidList" item="uid" open="(" separator="," close=")">
        #{uid,jdbcType=VARCHAR}
    </foreach>
  </select>
  
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 21 20:18:30 CST 2016.
    -->
    delete from t_customer_base_msg
    where id = #{id,jdbcType=INTEGER}
  </delete>
   <!--
     插入客户基本信息
   -->
  <insert id="insertCustomerBaseMsg" parameterType="com.ziroom.minsu.entity.customer.CustomerBaseMsgEntity" >
    insert IGNORE into t_customer_base_msg
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="uid != null" >
        uid,
      </if>
      <if test="realName != null" >
        real_name,
      </if>
      <if test="countryCode != null" >
        country_code,
      </if>
      <if test="customerMobile != null" >
        customer_mobile,
      </if>
      <if test="customerSex != null" >
        customer_sex,
      </if>
      <if test="customerBirthday != null" >
        customer_birthday,
      </if>
      <if test="customerEmail != null" >
        customer_email,
      </if>
      <if test="idType != null" >
        id_type,
      </if>
      <if test="idNo != null" >
        id_no,
      </if>
      <if test="nickName != null" >
        nick_name,
      </if>
      <if test="isLandlord != null" >
        is_landlord,
      </if>
      <if test="auditStatus != null" >
        audit_status,
      </if>
      <if test="clearingCode != null" >
        clearing_code,
      </if>
      <if test="rentPayment != null" >
        rent_payment,
      </if>
      <if test="nationCode != null" >
        nation_code,
      </if>
      <if test="provinceCode != null" >
        province_code,
      </if>
      <if test="cityCode != null" >
        city_code,
      </if>
      <if test="areaCode != null" >
        area_code,
      </if>
      <if test="resideAddr != null" >
        reside_addr,
      </if>
      <if test="customerEdu != null" >
        customer_edu,
      </if>
      <if test="customerJob != null" >
        customer_job,
      </if>
      <if test="isContactAuth != null" >
        is_contact_auth,
      </if>
      <if test="isIdentityAuth != null" >
        is_identity_auth,
      </if>
      <if test="isUploadIcon != null" >
        is_upload_icon,
      </if>
      <if test="createDate != null" >
        create_date,
      </if>
      <if test="lastModifyDate != null" >
        last_modify_date,
      </if>
      <if test="isDel != null" >
        is_del,
      </if>
      <if test="customerSource != null" >
        customer_source,
      </if>
      
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="uid != null" >
        #{uid,jdbcType=VARCHAR},
      </if>
      <if test="realName != null" >
        #{realName,jdbcType=VARCHAR},
      </if>
      <if test="countryCode != null" >
        #{countryCode,jdbcType=VARCHAR},
      </if>
      <if test="customerMobile != null" >
        #{customerMobile,jdbcType=VARCHAR},
      </if>
      <if test="customerSex != null" >
        #{customerSex,jdbcType=TINYINT},
      </if>
      <if test="customerBirthday != null" >
        #{customerBirthday,jdbcType=TIMESTAMP},
      </if>
      <if test="customerEmail != null" >
        #{customerEmail,jdbcType=VARCHAR},
      </if>
      <if test="idType != null" >
        #{idType,jdbcType=TINYINT},
      </if>
      <if test="idNo != null" >
        #{idNo,jdbcType=VARCHAR},
      </if>
      <if test="nickName != null" >
        #{nickName,jdbcType=VARCHAR},
      </if>
      <if test="isLandlord != null" >
        #{isLandlord,jdbcType=INTEGER},
      </if>
      <if test="auditStatus != null" >
        #{auditStatus,jdbcType=TINYINT},
      </if>
      <if test="clearingCode != null" >
        #{clearingCode,jdbcType=VARCHAR},
      </if>
      <if test="rentPayment != null" >
        #{rentPayment,jdbcType=TINYINT},
      </if>
      <if test="nationCode != null" >
        #{nationCode,jdbcType=VARCHAR},
      </if>
      <if test="provinceCode != null" >
        #{provinceCode,jdbcType=VARCHAR},
      </if>
      <if test="cityCode != null" >
        #{cityCode,jdbcType=VARCHAR},
      </if>
      <if test="areaCode != null" >
        #{areaCode,jdbcType=VARCHAR},
      </if>
      <if test="resideAddr != null" >
        #{resideAddr,jdbcType=VARCHAR},
      </if>
      <if test="customerEdu != null" >
        #{customerEdu,jdbcType=TINYINT},
      </if>      
      <if test="customerJob != null" >
        #{customerJob,jdbcType=TINYINT},
      </if>      
      <if test="isContactAuth != null" >
        #{isContactAuth,jdbcType=TINYINT},
      </if>
      <if test="isIdentityAuth != null" >
        #{isIdentityAuth,jdbcType=TINYINT},
      </if>
      <if test="isUploadIcon != null" >
        #{isUploadIcon,jdbcType=TINYINT},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastModifyDate != null" >
        #{lastModifyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isDel != null" >
        #{isDel,jdbcType=TINYINT},
      </if>
      <if test="customerSource != null" >
        #{customerSource,jdbcType=TINYINT},
      </if>
    </trim>
  </insert>
 
  <update id="updateCustomerBaseMsg" parameterType="com.ziroom.minsu.entity.customer.CustomerBaseMsgEntity" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 21 20:18:30 CST 2016.
    -->
    update t_customer_base_msg
    <set >
      <if test="uid != null" >
        uid = #{uid,jdbcType=VARCHAR},
      </if>
      <if test="realName != null and realName !=''" >
        real_name = #{realName,jdbcType=VARCHAR},
      </if>
      <if test="countryCode != null and  countryCode!=''" >
        country_code = #{countryCode,jdbcType=VARCHAR},
      </if>
      <if test="customerMobile != null and customerMobile !=''" >
        customer_mobile = #{customerMobile,jdbcType=VARCHAR},
      </if>
      <if test="customerSex != null" >
        customer_sex = #{customerSex,jdbcType=TINYINT},
      </if>
      <if test="customerBirthday != null" >
        customer_birthday = #{customerBirthday,jdbcType=TIMESTAMP},
      </if>
      <if test="customerEmail != null" >
        customer_email = #{customerEmail,jdbcType=VARCHAR},
      </if>
      <if test="idType != null" >
        id_type = #{idType,jdbcType=TINYINT},
      </if>
      <if test="idNo != null and idNo !=''" >
        id_no = #{idNo,jdbcType=VARCHAR},
      </if>
      <if test="nickName != null " >
        nick_name = #{nickName,jdbcType=VARCHAR},
      </if>
      <if test="isLandlord != null" >
        is_landlord = #{isLandlord,jdbcType=INTEGER},
      </if>
      <if test="auditStatus != null" >
        audit_status = #{auditStatus,jdbcType=TINYINT},
      </if>
      <if test="clearingCode != null and clearingCode !=''" >
        clearing_code = #{clearingCode,jdbcType=VARCHAR},
      </if>
      <if test="rentPayment != null" >
        rent_payment = #{rentPayment,jdbcType=TINYINT},
      </if>
      <if test="nationCode != null and nationCode !=''" >
        nation_code = #{nationCode,jdbcType=VARCHAR},
      </if>
      <if test="provinceCode != null and provinceCode !=''" >
        province_code = #{provinceCode,jdbcType=VARCHAR},
      </if>
      <if test="cityCode != null and cityCode!=''" >
        city_code = #{cityCode,jdbcType=VARCHAR},
      </if>
      <if test="areaCode != null and areaCode !=''" >
        area_code = #{areaCode,jdbcType=VARCHAR},
      </if>
      <if test="resideAddr != null" >
        reside_addr = #{resideAddr,jdbcType=VARCHAR},
      </if>
      <if test="customerEdu != null" >
        customer_edu = #{customerEdu,jdbcType=TINYINT},
      </if>
      <if test="customerJob != null " >
        customer_job = #{customerJob,jdbcType=VARCHAR},
      </if>
      <if test="isContactAuth != null" >
        is_contact_auth = #{isContactAuth,jdbcType=TINYINT},
      </if>
      <if test="isIdentityAuth != null" >
        is_identity_auth = #{isIdentityAuth,jdbcType=TINYINT},
      </if>
      <if test="isUploadIcon != null" >
        is_upload_icon = #{isUploadIcon,jdbcType=TINYINT},
      </if>
      <if test="createDate != null" >
        create_date = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastModifyDate != null" >
        last_modify_date = #{lastModifyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isDel != null" >
        is_del = #{isDel,jdbcType=TINYINT},
      </if>
       <if test="customerSource != null" >
        customer_source = #{customerSource,jdbcType=TINYINT},
      </if>
    
    </set>
    where uid = #{uid,jdbcType=VARCHAR}
  </update>
  
  <!-- 手机号查询客户信息 -->
  <select id="getCustomerByMobile" resultMap="BaseResultMap" parameterType="java.lang.String" >
    SELECT 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where  customer_mobile = #{customerMobile,jdbcType=VARCHAR}
    limit 1
  </select>
  
  <!-- 手机号查询所有客户信息 -->
  <select id="getCustomerListByMobile" resultMap="BaseResultMap" parameterType="java.lang.String" >
    SELECT 
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where  customer_mobile = #{customerMobile,jdbcType=VARCHAR}
    AND is_landlord = 1
    AND audit_status =1
    ORDER BY create_date
  </select>

  <!-- 认证资料map -->
  <resultMap type="com.ziroom.minsu.services.customer.entity.CustomerAuthVo" id="customerAuthMap" extends="BaseResultMap">
  	  <association property="voucherFrontPic" column="uid" javaType="com.ziroom.minsu.entity.customer.CustomerPicMsgEntity" select="customer.customerPicMsgDao.getCustomerFrontPic"></association>
  	  <association property="voucherBackPic" column="uid" javaType="com.ziroom.minsu.entity.customer.CustomerPicMsgEntity" select="customer.customerPicMsgDao.getCustomerBackPic"></association>
  	  <association property="voucherHandPic" column="uid" javaType="com.ziroom.minsu.entity.customer.CustomerPicMsgEntity" select="customer.customerPicMsgDao.getCustomerHandPic"></association>
  	  <association property="voucherHeadPic" column="uid" javaType="com.ziroom.minsu.entity.customer.CustomerPicMsgEntity" select="customer.customerPicMsgDao.getCustomerHeadPic"></association>
  </resultMap>

  <!-- 查询客户认证资料 -->
  <select id="getCustomerAuthData"  parameterType="string" resultMap="customerAuthMap">
  	select
    <include refid="Base_Column_List" />
    from t_customer_base_msg
    where uid = #{uid,jdbcType=VARCHAR}
  </select>

  <!-- 查询业主信息 -->
  <select id="staticsGetLandlordList" resultMap="BaseResultMap" >
    SELECT
    <include refid="Base_Column_List" />
    FROM t_customer_base_msg tc
    WHERE tc.is_landlord=1
    AND tc.is_del=0
  </select>

    <select id="countLanlordNum" resultType="java.lang.Long">
	<!-- 计算业主人数数量-->
	SELECT COUNT(*)
	FROM t_customer_base_msg tc
	WHERE tc.is_landlord=1
	AND tc.is_del=0
	</select>
	
	
	<update id="updateCustomerBaseMsgPortion" parameterType="com.ziroom.minsu.entity.customer.CustomerBaseMsgEntity" >
    <!--  api用户同步 部分更新用户数据
    -->
    update t_customer_base_msg
    <set >
     <if test="uid != null" >
         uid =  #{uid,jdbcType=VARCHAR},
      </if>
      <if test="realName != null and realName !=''" >
        real_name = #{realName,jdbcType=VARCHAR},
      </if>
       <if test="idType != null" >
        id_type = #{idType,jdbcType=TINYINT},
      </if>
      <if test="idNo != null and idNo !=''" >
        id_no = #{idNo,jdbcType=VARCHAR},
      </if>
      <if test="customerBirthday != null" >
        customer_birthday = #{customerBirthday,jdbcType=TIMESTAMP},
      </if>
      <if test="customerEmail != null and customerEmail!=''" >
        customer_email = #{customerEmail,jdbcType=VARCHAR},
      </if>
       <if test="resideAddr != null and resideAddr !=''" >
        reside_addr = #{resideAddr,jdbcType=VARCHAR},
      </if>
      <if test="customerSex != null" >
        customer_sex = #{customerSex,jdbcType=TINYINT},
      </if>
         <if test="nickName != null and nickName !=''" >
        nick_name = #{nickName,jdbcType=VARCHAR},
      </if>
      <if test="customerEdu != null" >
        customer_edu = #{customerEdu,jdbcType=TINYINT},
      </if>
      <if test="customerJob != null and customerJob !=''" >
        customer_job = #{customerJob,jdbcType=VARCHAR},
      </if>
      <if test="isContactAuth != null" >
        is_contact_auth = #{isContactAuth,jdbcType=TINYINT},
      </if>
        <if test="customerMobile != null and customerMobile !=''" >
        customer_mobile = #{customerMobile,jdbcType=VARCHAR},
      </if>
      
    </set>
    where uid = #{uid,jdbcType=VARCHAR}
  </update>
  
  <select id="getByCustomNameAndTel" parameterType="map" resultMap="BaseResultMap">
        SELECT 
        <include refid="Base_Column_List" />
		FROM `minsu_customer_db`.`t_customer_base_msg` 
		<where>
			<if test="realName != null and realName !=''" >
	            real_name = #{realName,jdbcType=VARCHAR}
	        </if>
			<if test="customerMobile != null and customerMobile !=''" >
	            and customer_mobile = #{customerMobile,jdbcType=VARCHAR}
	        </if>
		    and is_del=0 
	    </where> 
  </select>

</mapper>
